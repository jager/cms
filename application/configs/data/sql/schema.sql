CREATE TABLE Adminusers (id INT AUTO_INCREMENT, username VARCHAR(40) NOT NULL, password VARCHAR(40) NOT NULL, mailadr VARCHAR(150) NOT NULL, fname VARCHAR(50) NOT NULL, sname VARCHAR(100) NOT NULL, created timestamp DEFAULT systimestamp, edited TIMESTAMP, lastcorrectlogin TIMESTAMP, lastfaultylogin TIMESTAMP, loginamount INT DEFAULT 0, active CHAR(1) DEFAULT '0' NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_polish_ci ENGINE = MyISAM;
CREATE TABLE Aktuals (id INT AUTO_INCREMENT, title VARCHAR(150), shortcontent TEXT, fullcontent TEXT, tags TEXT, created TIMESTAMP, edited TIMESTAMP, active CHAR(1), link VARCHAR(160), published TIMESTAMP, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_polish_ci ENGINE = MyISAM;
CREATE TABLE AktualsLabels (aktuals_id INT, labels_id INT, PRIMARY KEY(aktuals_id, labels_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_polish_ci ENGINE = MyISAM;
CREATE TABLE Categories (id INT, cname VARCHAR(100), description TEXT, lft INT, rgt INT, added TIMESTAMP, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_polish_ci ENGINE = MyISAM;
CREATE TABLE Catsettings (id INT, sname VARCHAR(100), stype VARCHAR(20), predefinedvalues TEXT, skey VARCHAR(100), added TIMESTAMP, categories_id INT NOT NULL, INDEX categories_id_idx (categories_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_polish_ci ENGINE = MyISAM;
CREATE TABLE Fotos (id INT UNSIGNED AUTO_INCREMENT, sourcename VARCHAR(50) NOT NULL, description VARCHAR(200), tags TEXT, owner INT NOT NULL, author VARCHAR(100), added TIMESTAMP, galeries_id INT UNSIGNED NOT NULL, INDEX galeries_id_idx (galeries_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_polish_ci ENGINE = MyISAM;
CREATE TABLE Galeries (id INT UNSIGNED AUTO_INCREMENT, gname VARCHAR(100) NOT NULL, gdescription TEXT, owner INT NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_polish_ci ENGINE = MyISAM;
CREATE TABLE Items (id INT, iname VARCHAR(255), description TEXT, added TIMESTAMP, tags TEXT, categories_id INT NOT NULL, INDEX categories_id_idx (categories_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_polish_ci ENGINE = MyISAM;
CREATE TABLE Itemfeatures (intvalue INT, charvalue VARCHAR(255), textvalue TEXT, datevalue DATE, catsettings_id INT, items_id INT, added TIMESTAMP, edited TIMESTAMP, PRIMARY KEY(catsettings_id, items_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_polish_ci ENGINE = MyISAM;
CREATE TABLE Itemhistory (id INT, itemvalue VARCHAR(45), edited TIMESTAMP, itemfeatures_catsettings_id INT NOT NULL, itemfeatures_items_id INT NOT NULL, INDEX itemfeatures_catsettings_id_idx (itemfeatures_catsettings_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_polish_ci ENGINE = MyISAM;
CREATE TABLE Labels (id INT AUTO_INCREMENT, gname VARCHAR(50), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_polish_ci ENGINE = MyISAM;
CREATE TABLE Menus (id INT AUTO_INCREMENT, mname VARCHAR(20), type VARCHAR(10), link VARCHAR(100), parent_id INT, active CHAR(1), pages_id INT UNSIGNED NOT NULL, INDEX pages_id_idx (pages_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_polish_ci ENGINE = MyISAM;
CREATE TABLE Pages (id INT UNSIGNED AUTO_INCREMENT, pname VARCHAR(100), link VARCHAR(120), hd_title VARCHAR(200), hd_keywords TEXT, content TEXT, created TIMESTAMP DEFAULT current_timestamp, edited TIMESTAMP, active CHAR(1), owner VARCHAR(30), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_polish_ci ENGINE = MyISAM;
CREATE TABLE Pageshistory (id INT UNSIGNED AUTO_INCREMENT, backedup TIMESTAMP, content VARCHAR(45), backedup_by VARCHAR(30), pages_id INT UNSIGNED NOT NULL, INDEX pages_id_idx (pages_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_polish_ci ENGINE = MyISAM;
CREATE TABLE Tags (id INT UNSIGNED AUTO_INCREMENT, tname VARCHAR(50) NOT NULL, INDEX ind_tag_name_idx (tname), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_polish_ci ENGINE = MyISAM;
CREATE TABLE TagsRelations (tags_id INT UNSIGNED, rel_id INT, relname VARCHAR(45), PRIMARY KEY(tags_id, rel_id, relname)) DEFAULT CHARACTER SET utf8 COLLATE utf8_polish_ci ENGINE = MyISAM;
ALTER TABLE AktualsLabels ADD CONSTRAINT AktualsLabels_labels_id_Labels_id FOREIGN KEY (labels_id) REFERENCES Labels(id) ON DELETE CASCADE;
ALTER TABLE AktualsLabels ADD CONSTRAINT AktualsLabels_aktuals_id_Aktuals_id FOREIGN KEY (aktuals_id) REFERENCES Aktuals(id) ON DELETE CASCADE;
ALTER TABLE Catsettings ADD CONSTRAINT Catsettings_categories_id_Categories_id FOREIGN KEY (categories_id) REFERENCES Categories(id) ON DELETE CASCADE;
ALTER TABLE Fotos ADD CONSTRAINT Fotos_galeries_id_Galeries_id FOREIGN KEY (galeries_id) REFERENCES Galeries(id) ON DELETE CASCADE;
ALTER TABLE Items ADD CONSTRAINT Items_categories_id_Categories_id FOREIGN KEY (categories_id) REFERENCES Categories(id) ON DELETE CASCADE;
ALTER TABLE Itemfeatures ADD CONSTRAINT Itemfeatures_items_id_Items_id FOREIGN KEY (items_id) REFERENCES Items(id) ON DELETE CASCADE;
ALTER TABLE Itemfeatures ADD CONSTRAINT Itemfeatures_catsettings_id_Catsettings_id FOREIGN KEY (catsettings_id) REFERENCES Catsettings(id) ON DELETE CASCADE;
ALTER TABLE Itemfeatures ADD CONSTRAINT Icii FOREIGN KEY (catsettings_id) REFERENCES itemhistory(itemfeatures_catsettings_id);
ALTER TABLE Itemhistory ADD CONSTRAINT iiIc FOREIGN KEY (itemfeatures_catsettings_id) REFERENCES Itemfeatures(catsettings_id) ON DELETE CASCADE;
ALTER TABLE Menus ADD CONSTRAINT Menus_pages_id_Pages_id FOREIGN KEY (pages_id) REFERENCES Pages(id) ON DELETE CASCADE;
ALTER TABLE Pageshistory ADD CONSTRAINT pageshistory_pages_id_Pages_id FOREIGN KEY (pages_id) REFERENCES Pages(id) ON DELETE CASCADE;
ALTER TABLE TagsRelations ADD CONSTRAINT TagsRelations_tags_id_Tags_id FOREIGN KEY (tags_id) REFERENCES Tags(id) ON DELETE CASCADE;
